### EK EDIT: Removed references to vanilla faiths
### EK TODO: Add our own, cause I don't think Alexander the Great or Khalid ibn al-Walid exist in the TES universe

#These events serve as an alternate way of gaining commander traits, by learning about historical battles.
namespace = historical_commander_trait

##################################################
# Hannibal Bacar
# by Sean Hughes
# 0001
##################################################

historical_commander_trait.0001 = {
	type = character_event
	title = historical_commander_trait.0001.t
	desc = historical_commander_trait.0001.desc
	theme = war
	left_portrait = root
	
	trigger = {
		NOR = {
			has_character_flag = being_taught_commander_trait
			has_character_flag = had_historical_commander_trait_event_0001
		}
		number_of_commander_traits < 3

	}

	weight_multiplier = {
		base = 1
		compare_modifier = {
			factor = martial
			multiplier = 0.1
			max = 2
		}
		modifier = {
			factor = 0.3
			number_of_commander_traits > 0
		}
		modifier = {
			factor = 0.3
			number_of_commander_traits > 1
		}
		upweight_for_focus_modifier = { FOCUS = martial_strategy_focus }
	}

	immediate = {
		add_character_flag = {
			flag = had_historical_commander_trait_event_0001
		}
	}

	option = {
		name = historical_commander_trait.0001.a
		trigger = { NOT = { has_trait = aggressive_attacker } }
		add_trait = aggressive_attacker
		stress_impact = {
			compassionate = minor_stress_impact_gain
			calm = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
			patient = minor_stress_impact_gain
			craven = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 0.25
				ai_energy = 0.5
				ai_boldness = 1
				ai_vengefulness = 0.2
				ai_compassion = -0.5
			}
		}
	}

	option = {
		name = historical_commander_trait.0001.b
		trigger = { NOT = { has_trait = logistician } }
		add_trait = logistician
		stress_impact = {
			impatient = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			forgiving = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
				ai_energy = 0.25
				ai_greed = -0.5
			}
		}
	}

	option = {
		name = historical_commander_trait.0001.c
		trigger = { NOT = { has_trait = flexible_leader } }
		add_trait = flexible_leader
		stress_impact = {
			impatient = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
				ai_energy = 0.25
				ai_greed = -0.5
			}
		}
	}

	
	option = {
		name = historical_commander_trait.0001.d
		name = {
			trigger = {
				has_trait = compassionate
				has_trait = forgiving
			}
			text = historical_commander_trait.0001.d.good
		}
		custom_tooltip = historical_commander_trait.reject.tt

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 1
				ai_boldness = -0.5
				ai_honor = -0.5
				ai_vengefulness = -0.5
			}
		}
	}
}