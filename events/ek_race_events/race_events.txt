namespace = ek_race

scripted_trigger ek_race_compatable_trigger = {
	trigger_if = {
		limit = {
			scope:mother = {
				has_trait = race_khajiit
			}
		}
		scope:real_father = { has_trait = race_khajiit }
	}
	trigger_if = {
		limit = {
			scope:real_father = {
				has_trait = race_khajiit
			}
		}
		scope:mother = { has_trait = race_khajiit }
	}
	trigger_if = {
		limit = {
			scope:mother = {
				has_trait = race_argonian
			}
		}
		scope:real_father = { has_trait = race_argonian }
	}
	trigger_if = {
		limit = {
			scope:real_father = {
				has_trait = race_argonian
			}
		}
		scope:mother = { has_trait = race_argonian }
	}
	trigger_if = {
		limit = {
			scope:mother = {
				NOT = { has_trait = race_khajiit }
				NOT = { has_trait = race_argonian }
			}
			scope:real_father = {
				NOT = { has_trait = race_khajiit }
				NOT = { has_trait = race_argonian }
			}
		}
		always = yes
	}
}

#Ends Pregnancy between two incompatible species
ek_race.0001 = {
	hidden = yes

	trigger = {
		ek_race_compatable_trigger = no
	}

	immediate = {
		hidden_effect = {
			random_dummy_gender_effect = yes
			end_pregnancy = yes
			pregnancy_cleanup_effect = yes
		}
	}
}

#Assigns Racial traits (if applicable) and elven immortality to randomgen characters
ek_race.0002 = {
	hidden = yes

	immediate = {
		hidden_effect = {
			race_traits_effect = yes
		}
	}
}

#Handles inheritance of lifespan traits
ek_race.0003 = {
	hidden = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					scope:real_father = { has_trait = lifespan_1 }
					scope:mother = { has_trait = lifespan_1 }
				}
				add_trait = lifespan_1
			}
			if = {
				limit = {
					scope:real_father = { has_trait = lifespan_1 }
					scope:mother = { has_trait = lifespan }
				}
				add_trait = lifespan_1
			}
			if = {
				limit = {
					scope:real_father = { has_trait = lifespan }
					scope:mother = { has_trait = lifespan_1 }
				}
				add_trait = lifespan_1
			}
			if = {
				limit = {
					scope:real_father = { has_trait = lifespan NOT = { has_trait = lifespan_1 } }
					scope:mother = { has_trait = lifespan NOT = { has_trait = lifespan_1 } }
				}
				add_trait = lifespan_2
			}
		}
	}
}