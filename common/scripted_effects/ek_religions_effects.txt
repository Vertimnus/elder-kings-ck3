### Scripted effects tied to religions & faiths
# Stuff scaling with stress level
update_religions_stress = {
	if = {
		limit = {
			OR = {
				# Your faith has a stress related tenet
				faith = { has_doctrine_parameter = stress_gives_piety_active }
				# You have a stress related modifier
				has_character_modifier = stress_gives_piety_stress_1
				has_character_modifier = stress_gives_piety_stress_2
				has_character_modifier = stress_gives_piety_stress_3
			}
		}
		
		# Remove the modifiers
		remove_character_modifier = stress_gives_piety_stress_1
		remove_character_modifier = stress_gives_piety_stress_2
		remove_character_modifier = stress_gives_piety_stress_3
		
		# Add the ones you need
		if = {
			limit = { faith = { has_doctrine_parameter = stress_gives_piety_active } }
			if = {
				limit = { stress_level >= 3 }
				add_character_modifier = stress_gives_piety_stress_3
			}
			else_if = {
				limit = { stress_level >= 2 }
				add_character_modifier = stress_gives_piety_stress_2
			}
			else_if = {
				limit = { stress_level >= 1 }
				add_character_modifier = stress_gives_piety_stress_1
			}
		}
	}
}

# Stuff scaling with devotion (piety_level)
clear_religions_piety_level_effect = {
	remove_character_modifier = $MODIFIER$_0
	remove_character_modifier = $MODIFIER$_1
	remove_character_modifier = $MODIFIER$_2
	remove_character_modifier = $MODIFIER$_3
	remove_character_modifier = $MODIFIER$_4
	remove_character_modifier = $MODIFIER$_5
}

update_religions_piety_level_effect = {
	clear_religions_piety_level_effect = { MODIFIER = $MODIFIER$ }
	
	if = {
		limit = { faith = { has_doctrine_parameter = $MODIFIER$ } }
		if = {
			limit = { piety_level >= 5 }
			add_character_modifier = $MODIFIER$_5
		}
		else_if = {
			limit = { piety_level >= 4 }
			add_character_modifier = $MODIFIER$_4
		}
		else_if = {
			limit = { piety_level >= 3 }
			add_character_modifier = $MODIFIER$_3
		}
		else_if = {
			limit = { piety_level >= 2 }
			add_character_modifier = $MODIFIER$_2
		}
		else_if = {
			limit = { piety_level >= 1 }
			#add_character_modifier = $MODIFIER$_1
		}
		else_if = {
			limit = { piety_level >= 0 }
			add_character_modifier = $MODIFIER$_0
		}
	}
}

### USE IT ONLY IF YOU ALREADY KNOW THE FAITH SUPPORTS THESE MODIFIERS
# If in doubt, use update_religions_piety_level_effect
unsafe_update_religions_piety_level_effect = {
	clear_religions_piety_level_effect = { MODIFIER = $MODIFIER$ }
	
	if = {
		limit = { piety_level >= 5 }
		add_character_modifier = $MODIFIER$_5
	}
	else_if = {
		limit = { piety_level >= 4 }
		add_character_modifier = $MODIFIER$_4
	}
	else_if = {
		limit = { piety_level >= 3 }
		add_character_modifier = $MODIFIER$_3
	}
	else_if = {
		limit = { piety_level >= 2 }
		add_character_modifier = $MODIFIER$_2
	}
	else_if = {
		limit = { piety_level >= 1 }
		#add_character_modifier = $MODIFIER$_1
	}
	else_if = {
		limit = { piety_level >= 0 }
		add_character_modifier = $MODIFIER$_0
	}
}

update_religions_piety_level = {
	### POPULAR OPINION WITH DEVOTION
	if = {
		limit = {
			OR = {
				# Your faith has a devotion related tenet
				faith = { has_doctrine_parameter = devotion_gives_popular_opinion }
				# You have a devotion related modifier
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_popular_opinion }
			}
		}
		
		update_religions_piety_level_effect = { MODIFIER = devotion_gives_popular_opinion }
	}
	
	### CALAVRY EFFECTIVENESS WITH DEVOTION
	if = {
		limit = {
			OR = {
				# Your faith has a devotion related tenet
				faith = { has_doctrine_parameter = devotion_gives_cavalry_effectiveness }
				# You have a devotion related modifier
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_cavalry_effectiveness }
			}
		}
		
		update_religions_piety_level_effect = { MODIFIER = devotion_gives_cavalry_effectiveness }
	}
	
	### DEVELOPMENT GROWTH WITH DEVOTION
	if = {
		limit = {
			OR = {
				# Your faith has a devotion related tenet
				faith = { has_doctrine_parameter = devotion_gives_development_progress }
				# You have a devotion related modifier
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_development_progress }
			}
		}
		
		update_religions_piety_level_effect = { MODIFIER = devotion_gives_development_progress }
	}
	
	### STAR SIGN POWER WITH DEVOTION
	if = {
		limit = {
			OR = {
				# Your faith has a devotion related tenet
				faith = { has_doctrine_parameter = devotion_gives_star_sign_power }
				# You have a devotion related modifier
				### Twelve star signs
				# Ritual
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_ritual }
				# Lover
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_lover }
				# Lord
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_lord }
				# Mage
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_mage }
				# Shadow
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_shadow }
				# Steed
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_steed }
				# Apprentice
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_apprentice }
				# Warrior
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_warrior }
				# Lady
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_lady }
				# Tower
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_tower }
				# Atronach
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_atronach }
				# Thief
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_thief }
				# Serpent
				has_character_modifier_scaling_devotion = { MODIFIER = devotion_gives_star_sign_power_serpent }
			}
		}
		
		if = {
			limit = { has_trait = sign_ritual }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_ritual }
		}
		else_if = {
			limit = { has_trait = sign_lover }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_lover }
		}
		else_if = {
			limit = { has_trait = sign_lord }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_lord }
		}
		else_if = {
			limit = { has_trait = sign_mage }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_mage }
		}
		else_if = {
			limit = { has_trait = sign_shadow }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_shadow }
		}
		else_if = {
			limit = { has_trait = sign_steed }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_steed }
		}
		else_if = {
			limit = { has_trait = sign_apprentice }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_apprentice }
		}
		else_if = {
			limit = { has_trait = sign_warrior }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_warrior }
		}
		else_if = {
			limit = { has_trait = sign_lady }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_lady }
		}
		else_if = {
			limit = { has_trait = sign_tower }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_tower }
		}
		else_if = {
			limit = { has_trait = sign_atronach }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_atronach }
		}
		else_if = {
			limit = { has_trait = sign_thief }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_thief }
		}
		else_if = {
			limit = { has_trait = sign_serpent }
			unsafe_update_religions_piety_level_effect = { MODIFIER = devotion_gives_star_sign_power_serpent }
		}
	}
}

### FAITH'S VIEW ON THE DAEDRIC PRINCES
faith_give_view_daedric_prince = {
	if = {
		limit = { has_doctrine = doctrine_hidden_daedra_allowed }
		if = {
			limit = {
				NOR = {
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_pantheon
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_allowed
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_shunned
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_criminal
				}
			}
			add_doctrine = doctrine_$DAEDRIC_PRINCE$_allowed
		}
	}
	else_if = {
		limit = { has_doctrine = doctrine_hidden_daedra_shunned }
		if = {
			limit = {
				NOR = {
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_pantheon
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_allowed
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_shunned
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_criminal
				}
			}
			add_doctrine = doctrine_$DAEDRIC_PRINCE$_shunned
		}
	}
	else_if = {
		limit = { has_doctrine = doctrine_hidden_daedra_criminal }
		if = {
			limit = {
				NOR = {
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_pantheon
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_allowed
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_shunned
					has_doctrine = doctrine_$DAEDRIC_PRINCE$_criminal
				}
			}
			add_doctrine = doctrine_$DAEDRIC_PRINCE$_criminal
		}
	}
}

faith_give_view_daedric_princes = {
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = azura }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = boethiah }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = clavicus }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = hermaeus }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = hircine }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = malacath }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = mehrunes }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = mephala }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = meridia }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = molag }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = namira }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = nocturnal }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = peryite }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = sanguine }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = sheogorath }
	faith_give_view_daedric_prince = { DAEDRIC_PRINCE = vaermina }
	
	# Remove the doctrines
	if = {
		limit = { has_doctrine = doctrine_hidden_daedra_allowed }
		remove_doctrine = doctrine_hidden_daedra_allowed
	}
	else_if = {
		limit = { has_doctrine = doctrine_hidden_daedra_shunned }
		remove_doctrine = doctrine_hidden_daedra_shunned
	}
	else_if = {
		limit = { has_doctrine = doctrine_hidden_daedra_criminal }
		remove_doctrine = doctrine_hidden_daedra_criminal
	}
}